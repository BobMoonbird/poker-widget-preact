(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"1/Zx":function(e,t,r){"use strict";var a=r("hosL"),n=r("duEm"),i=r.n(n),o=r("Sqjx"),s=r("QSnH"),c=r("YLTM");t.a=class extends a.a{constructor(){super(...arguments),this.handleReveal=async e=>{"function"==typeof this.props.onBeforeReveal&&this.props.onBeforeReveal(e);var t=(await Object(o.a)()).filter(e=>"back"===Object(s.a)(e).side).map(e=>{var{id:t}=e,{value:r}=Object(s.a)(e);return{id:t,metadata:Object(s.b)(e,{side:"face"}),url:Object(c.a)("face",r)}});await miro.board.widgets.update(t),"function"==typeof this.props.onReveal&&this.props.onReveal()},this.handleClear=async e=>{"function"==typeof this.props.onBeforeClear&&this.props.onBeforeClear(e);var t=(await Object(o.a)()).filter(e=>"card"===Object(s.a)(e).type).map(e=>e.id),r=miro.board.widgets.deleteById(t);console.log("deleted",r.length,"cards"),"function"==typeof this.props.onClear&&this.props.onClear()}}render(){return Object(a.f)("nav",{class:i.a.wrapper},Object(a.f)("button",{type:"button",class:"miro-btn miro-btn--primary miro-btn--small",onClick:this.handleReveal},"Reveal all"),Object(a.f)("button",{class:"miro-btn miro-btn--secondary miro-btn--small",type:"button",onClick:this.handleClear},"Clear all"))}}},"5IsQ":function(e){function t(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(c===setTimeout)return setTimeout(e,0);if((c===t||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function n(){p&&d&&(p=!1,d.length?h=d.concat(h):f=-1,h.length&&i())}function i(){if(!p){var e=a(n);p=!0;for(var t=h.length;t;){for(d=h,h=[];++f<t;)d&&d[f].run();f=-1,t=h.length}d=null,p=!1,function(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}(e)}}function o(e,t){this.fun=e,this.array=t}function s(){}var c,l,u=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:t}catch(e){c=t}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var d,h=[],p=!1,f=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new o(e,t)),1!==h.length||p||a(i)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.prependListener=s,u.prependOnceListener=s,u.listeners=function(){return[]},u.binding=function(){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},L76c:function(e){e.exports={sidebar:"sidebar__U7KN2"}},QSnH:function(e,t,r){"use strict";function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(r,!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return c}));var o=r("tVdo"),s=function(e,t){if(void 0===t&&(t=o.a),!t)throw new Error("No appId specified");return e.metadata[t]||{}},c=function(e,t,r){return void 0===r&&(r=o.a),n({},e.metadata,{[r]:n({},e.metadata[r],{},t)})}},Sqjx:function(e,t,r){"use strict";async function a(){return(await miro.board.widgets.get()).filter(e=>"card"===Object(n.a)(e).type)}r.d(t,"a",(function(){return a}));var n=r("QSnH")},YLTM:function(e,t,r){"use strict";(function(){t.a=function(e,t){return void 0===t&&(t=""),window.location.origin+"/assets/cards/"+e+t+".svg"}}).call(this,r("5IsQ"))},duEm:function(e){e.exports={wrapper:"wrapper__18AHL"}},lym1:function(e,t,r){"use strict";function a(){var e,t,r=(e=1,t=h,Math.floor(Math.random()*(t-e+1))+e);return Object(d.a)("back",r)}r.r(t);var n=r("hosL"),i=r("L76c"),o=r.n(i),s=r("n5xL"),c=r.n(s),l=r("1/Zx"),u=r("QSnH"),d=r("YLTM"),h=6,p=50;var f=class extends n.a{constructor(){super(...arguments),this.state={loaded:!1},this.handleLoad=()=>{this.setState({loaded:!0})}}render(e){var{value:t,disabled:r,label:a,index:i,cards:o=[]}=e,s=Object(d.a)("face",t),l=(o.length-i)*p;return Object(n.f)("div",{class:c.a.cardWrapper,style:{animationDelay:"-"+l+"ms"}},Object(n.f)("button",{class:c.a.card,title:a,disabled:Boolean(r),"data-loaded":this.state.loaded?"yes":"no","data-value":t,type:"button",style:{backgroundImage:"url("+s+")"},"data-image-url":s},Object(n.f)("span",null,a)),Object(n.f)("img",{class:c.a.hiddenImg,onLoad:this.handleLoad,src:s}))}},b=r("tVdo"),m=e=>{var{disabled:t}=e;return Object(n.f)(n.b,null,b.b.map((e,r,a)=>{var{label:i,value:o}=e;return Object(n.f)(f,{key:o,disabled:t,label:i,value:o,index:r,cards:a})}))};class v extends n.a{constructor(){super(...arguments),this.handleSwap=async e=>{"function"==typeof this.props.onBeforeSwap&&this.props.onBeforeSwap(e);try{await miro.board.widgets.deleteById([this.props.chosenCardWidget.id]),"function"==typeof this.props.onSwap&&this.props.onSwap(e)}catch(e){console.error(this.props.chosenCardWidget.id),console.error(e),"function"==typeof this.props.onError&&this.props.onError(e)}}}render(e){var{chosenCardWidget:t}=e,{value:r,label:a}=b.c[Object(u.a)(t).value];return Object(n.f)("section",{class:c.a.chosenCardWrapper},Object(n.f)("h4",{class:"miro-h2"},"Your card"),Object(n.f)(f,{value:r,label:a,disabled:!0}),Object(n.f)("button",{onClick:this.handleSwap,type:"button",class:"miro-btn miro-btn--secondary miro-btn--small"},"Swap"))}}var y=r("Sqjx"),w=10,g=20,O=(e,t)=>Math.round(e/t)*t,j=r("uXYu"),C=r.n(j),S=e=>{var{severity:t,title:r,children:a}=e;return Object(n.f)("section",{class:C.a.wrapper,"data-severity":t},Object(n.f)("h4",{class:"miro-h4"},r),a)},x=1.5;class L extends n.a{constructor(){super(...arguments),this.state={time:Date.now(),count:10,loading:!0,error:null,chosenCardWidget:null,showList:!0},this.ref=Object(n.e)(),this.onReady=()=>{var e,t;miro.board.ui.initDraggableItemsContainer(this.ref.current,{draggableItemSelector:"."+c.a.card,onClick:t=>{e=t.dataset.value},getDraggableItemPreview:r=>(t=a(),e=r.dataset.value,{width:r.offsetWidth,height:r.offsetWidth*x,url:t}),onDrop:async(r,a)=>{this.hideList();var n={type:"card",side:"back",value:e,author:this.state.id},i=await function(e){var{x:t,y:r,url:a,metadata:n}=e;return miro.board.widgets.create({type:"image",url:a,x:O(t,w),y:O(r,g),capabilities:{editable:!1},metadata:{[b.a]:n}})}({x:r,y:a,url:t,metadata:n}),[o]=i;this.setChosenCard(o)}})},this.setChosenCard=(e,t)=>{this.setState({chosenCardWidget:e,showList:!1},t),this.checkCardExistence(e.id)},this.checkCardExistence=async e=>{try{await miro.board.widgets.update([{id:e}]),setTimeout(this.checkCardExistence,1e3,e)}catch(e){this.clearChosenCard()}},this.hideList=()=>{this.setState({showList:!1})},this.showList=()=>{this.setState({showList:!0})},this.clearChosenCard=e=>{this.setState({chosenCardWidget:null,showList:!0},e)},this.handleBeforeClear=async()=>{this.clearChosenCard()},this.handleReveal=async()=>{},this.init=async()=>{if(!miro.currentUser)return this.setState({error:"Seems like the app is running not as a part of Miro board"});try{var[e,t]=await Promise.all([miro.currentUser.getId(),Object(y.a)()]),r=t.find(t=>Object(u.a)(t).author===e);r&&this.setChosenCard(r),this.setState({id:e,loading:!1},()=>{miro.onReady(this.onReady)})}catch(e){console.error(e),this.setState({error:e.toString()})}},this.onWidgetsDeleted=e=>{var{data:t}=e,{chosenCardWidget:r}=this.state;if(!r)return!1;t.find(e=>e.id===r.id)&&this.clearChosenCard()}}componentDidMount(){this.init()}render(e,t){var{chosenCardWidget:r,showList:a,loading:i,error:o}=t;return o?Object(n.f)(S,{severity:"error",title:"Oooops..."},Object(n.f)("code",null,o)):Object(n.f)(n.b,null,Object(n.f)("div",{class:c.a.controlsWrapper},Object(n.f)(l.a,{onReveal:this.handleReveal,onBeforeClear:this.handleBeforeClear})),Object(n.f)("div",{ref:this.ref,class:c.a.wrapper},!r&&!i&&Object(n.f)(m,{disabled:!a})),Boolean(r)&&Object(n.f)(v,{chosenCardWidget:r}))}}r.d(t,"default",(function(){return T}));class T extends n.a{constructor(){super(...arguments),this.state={time:Date.now(),count:10},this.updateTime=()=>{this.setState({time:Date.now()})},this.increment=()=>{this.setState({count:this.state.count+1})}}componentDidMount(){this.timer=setInterval(this.updateTime,1e3)}componentWillUnmount(){clearInterval(this.timer)}render(e,t){return Object(n.f)("div",{class:o.a.sidebar},Object(n.f)(L,null))}}},n5xL:function(e){e.exports={cardWrapper:"cardWrapper__1MWxn",appear:"appear__3Vz41",card:"card__3IJo5",floating:"floating__34mDX",hiddenImg:"hiddenImg__1BjkP",chosenCardWrapper:"chosenCardWrapper__3hGqt",wrapper:"wrapper__3uuSv",controlsWrapper:"controlsWrapper__1xvok"}},tVdo:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i}));var a="3074457347007443177",n=[{label:"0",value:0},{label:"½",value:.5},{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"40",value:40},{label:"100",value:100},{label:"☕",value:"coffee"},{label:"∞",value:"infinity"}],i=n.reduce((e,t)=>(e[t.value]=t,e),{})},uXYu:function(e){e.exports={wrapper:"wrapper__jTLi2"}}}]);
//# sourceMappingURL=route-sidebar.chunk.d76ed.esm.js.map