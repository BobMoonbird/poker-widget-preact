{"version":3,"sources":["webpack:///./components/Controls/index.js","webpack:///./utils/metadata.js","webpack:///./utils/getCards.js","webpack:///./routes/bottomPanel/index.js","webpack:///./utils/getCardURL.js","webpack:///./components/Controls/style.less","webpack:///./appconstants/index.js"],"names":["Controls","handleReveal","event","backCards","updates","props","onBeforeReveal","getCards","filter","widget","getMetadata","side","map","id","value","metadata","updateMetadata","url","getCardURL","miro","board","widgets","update","onReveal","handleClear","allCardIds","deleted","onBeforeClear","type","deleteById","console","log","length","onClear","render","class","style","wrapper","onClick","this","Component","appId","APP_ID","Error","nextMetadata","get","Sidebar","state","time","sidebar","window","location","origin","module","exports","CARDS_LIST","label","CARDS_MAP","reduce","acc","item"],"mappings":"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","file":"route-bottomPanel.chunk.5af43.js","sourcesContent":["import { h, Component } from 'preact';\r\nimport style from './style';\r\nimport getCards from 'utils/getCards';\r\nimport { getMetadata, updateMetadata } from 'utils/metadata';\r\nimport getCardURL from 'utils/getCardURL';\r\n\r\nclass Controls extends Component {\r\n\thandleReveal = async event => {\r\n\t\tif (typeof this.props.onBeforeReveal === 'function') {\r\n\t\t\tthis.props.onBeforeReveal(event);\r\n\t\t}\r\n\t\tconst cards = await getCards();\r\n\r\n\t\tconst backCards = cards.filter(\r\n\t\t\twidget => getMetadata(widget).side === 'back'\r\n\t\t);\r\n\r\n\t\tconst updates = backCards.map(widget => {\r\n\t\t\tconst { id } = widget;\r\n\t\t\tconst { value } = getMetadata(widget);\r\n\t\t\treturn {\r\n\t\t\t\tid,\r\n\t\t\t\tmetadata: updateMetadata(widget, {\r\n\t\t\t\t\tside: 'face',\r\n\t\t\t\t}),\r\n\t\t\t\turl: getCardURL('face', value),\r\n\t\t\t};\r\n\t\t});\r\n\t\tawait miro.board.widgets.update(updates);\r\n\t\tif (typeof this.props.onReveal === 'function') {\r\n\t\t\tthis.props.onReveal();\r\n\t\t}\r\n\t};\r\n\r\n\thandleClear = async event => {\r\n\t\tif (typeof this.props.onBeforeClear === 'function') {\r\n\t\t\tthis.props.onBeforeClear(event);\r\n\t\t}\r\n\r\n\t\tconst cards = await getCards();\r\n\r\n\t\tconst allCardIds = cards\r\n\t\t\t.filter(widget => getMetadata(widget).type === 'card')\r\n\t\t\t.map(widget => widget.id);\r\n\r\n\t\tconst deleted = miro.board.widgets.deleteById(allCardIds);\r\n\r\n\t\t// eslint-disable-next-line no-console\r\n\t\tconsole.log('deleted', deleted.length, 'cards');\r\n\t\tif (typeof this.props.onClear === 'function') {\r\n\t\t\tthis.props.onClear();\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<nav class={style.wrapper}>\r\n\t\t\t\t<button\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tclass=\"miro-btn miro-btn--primary miro-btn--small\"\r\n\t\t\t\t\tonClick={this.handleReveal}\r\n\t\t\t\t>\r\n\t\t\t\t\tReveal all\r\n\t\t\t\t</button>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"miro-btn miro-btn--secondary miro-btn--small\"\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tonClick={this.handleClear}\r\n\t\t\t\t>\r\n\t\t\t\t\tClear all\r\n\t\t\t\t</button>\r\n\t\t\t</nav>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Controls;\r\n\r\n/*\r\nconst roundResults = backCards =>\r\n\tbackCards.reduce((acc, widget) => {\r\n\t\tconst { value } = getMetadata(widget);\r\n\t\tif (value in acc) {\r\n\t\t\tacc[value]++;\r\n\t\t} else {\r\n\t\t\tacc[value] = 1;\r\n\t\t}\r\n\r\n\t\treturn acc;\r\n\t}, {});\r\n\r\nconst resultShapePoint = backCards =>\r\n\tbackCards.reduce(\r\n\t\t(acc, widget, index, { length }) => {\r\n\t\t\tacc.x = acc.x + widget.x / length;\r\n\t\t\tacc.y = Math.max(acc.y, widget.y);\r\n\t\t\treturn acc;\r\n\t\t},\r\n\t\t{ x: 0, y: 0 }\r\n\t);\r\n\r\n\t*/\r\n","import { APP_ID } from 'appconstants';\r\n\r\nexport const getMetadata = (widget, appId = APP_ID) => {\r\n\tif (!appId) {\r\n\t\tthrow new Error('No appId specified');\r\n\t}\r\n\treturn widget.metadata[appId] || {};\r\n};\r\nexport const updateMetadata = (widget, nextMetadata, appId = APP_ID) => ({\r\n\t...widget.metadata,\r\n\t[appId]: {\r\n\t\t...widget.metadata[appId],\r\n\t\t...nextMetadata,\r\n\t},\r\n});\r\n\r\nexport const setMetadata = (widget, nextMetadata, appId = APP_ID) => ({\r\n\t...widget.metadata,\r\n\t[appId]: nextMetadata,\r\n});\r\n","import { getMetadata } from './metadata';\r\n\r\nexport default async function getCards() {\r\n\tconst widgets = await miro.board.widgets.get();\r\n\treturn widgets.filter(widget => getMetadata(widget).type === 'card');\r\n}\r\n","import { h, Component } from 'preact';\r\nimport style from './style';\r\nimport Controls from '../../components/Controls';\r\n\r\nexport default class Sidebar extends Component {\r\n\tstate = {\r\n\t\ttime: 1,\r\n\t};\r\n\r\n\t// Note: `user` comes from the URL, courtesy of our router\r\n\trender({ user }, { time, count }) {\r\n\t\treturn (\r\n\t\t\t<div class={style.sidebar}>\r\n\t\t\t\t<Controls />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","const { BASE_URL } = process.env;\r\n\r\nexport default (side, value = '') =>\r\n\t`${window.location.origin}/assets/cards/${side}${value}.svg`;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"wrapper__18AHL\"};","export const APP_ID = '3074457347007443177';\r\n\r\nexport const CARDS_LIST = [\r\n\t{\r\n\t\tlabel: '0',\r\n\t\tvalue: 0,\r\n\t},\r\n\t{\r\n\t\tlabel: '½',\r\n\t\tvalue: 0.5,\r\n\t},\r\n\t{\r\n\t\tlabel: '1',\r\n\t\tvalue: 1,\r\n\t},\r\n\t{\r\n\t\tlabel: '2',\r\n\t\tvalue: 2,\r\n\t},\r\n\t{\r\n\t\tlabel: '3',\r\n\t\tvalue: 3,\r\n\t},\r\n\t{\r\n\t\tlabel: '5',\r\n\t\tvalue: 5,\r\n\t},\r\n\t{\r\n\t\tlabel: '10',\r\n\t\tvalue: 10,\r\n\t},\r\n\t{\r\n\t\tlabel: '20',\r\n\t\tvalue: 20,\r\n\t},\r\n\t{\r\n\t\tlabel: '40',\r\n\t\tvalue: 40,\r\n\t},\r\n\t{\r\n\t\tlabel: '100',\r\n\t\tvalue: 100,\r\n\t},\r\n\t{\r\n\t\tlabel: '☕',\r\n\t\tvalue: 'coffee',\r\n\t},\r\n\t{\r\n\t\tlabel: '∞',\r\n\t\tvalue: 'infinity',\r\n\t},\r\n];\r\n\r\nexport const CARDS_MAP = CARDS_LIST.reduce((acc, item) => {\r\n\tacc[item.value] = item;\r\n\treturn acc;\r\n}, {});\r\n"],"sourceRoot":""}