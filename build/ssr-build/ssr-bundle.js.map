{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../node_modules/isomorphic-unfetch/browser.js","webpack:///../node_modules/promise-polyfill/src/finally.js","webpack:///../node_modules/promise-polyfill/src/index.js","webpack:///external \"preact\"","webpack:///./routes/home/style.less?14e8","webpack:///./routes/sidebar/style.less?6c2a","webpack:///../src/util.js","webpack:///../src/index.js","webpack:///./routes/home/index.js","webpack:///./appconstants/index.js","webpack:///./utils/metadata.js","webpack:///./utils/getCards.js","webpack:///./utils/getCardURL.js","webpack:///./components/Controls/index.js","webpack:///./utils/getBackCardUrl.js","webpack:///./utils/getRandomInteger.js","webpack:///./routes/sidebar/components/Card.js","webpack:///./routes/sidebar/components/CardsList.js","webpack:///./routes/sidebar/components/ChosenCard.js","webpack:///./utils/createCard.js","webpack:///./components/Placeholder/index.js","webpack:///./routes/sidebar/components/CardBacksPreloader.js","webpack:///./routes/sidebar/components/CardPicker.js","webpack:///./routes/sidebar/index.js","webpack:///./routes/bottomPanel/index.js","webpack:///./routes/authorize/index.js","webpack:///./routes/authorize-success/index.js","webpack:///./components/app.js","webpack:///../src/lib.js","webpack:///./index.js","webpack:///./assets/icons/icon48.svg","webpack:///../node_modules/preact-cli/lib/lib/webpack/polyfills.js","webpack:///../src/index.mjs","webpack:///./routes/authorize/style.less?6794","webpack:///./components/Controls/style.less?cded","webpack:///./routes/sidebar/components/style.less?fafd","webpack:///./assets/icons/icon24.svg","webpack:///./components/Placeholder/style.less?d520"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","window","fetch","require","default","finallyConstructor","callback","constructor","this","then","resolve","reason","reject","setTimeoutFunc","setTimeout","isArray","x","Boolean","length","noop","Promise","fn","TypeError","_state","_handled","_value","undefined","_deferreds","doResolve","handle","self","deferred","_immediateFn","cb","onFulfilled","onRejected","ret","e","promise","push","newValue","finale","thisArg","apply","arguments","_unhandledRejectionFn","len","Handler","done","ex","prom","promiseFinally","all","arr","args","Array","slice","remaining","res","val","race","setImmediate","err","console","warn","EMPTY","obj","props","let","pathRankSort","a","b","rank","index","prepareVNodeForRanking","vnode","path","segmentize","map","rankSegment","join","rankChild","url","replace","split","segment","charAt","indexOf","super","const","route","opts","reg","match","matches","decodeURIComponent","max","Math","param","flags","plus","star","startApp","miro","board","openLibrary","ui","openBottomPanel","width","Home","componentDidMount","onReady","initialize","extensionPoints","toolbar","title","toolbarSvgIcon","icon24","librarySvgIcon","icon48","onClick","isAuthorized","openModal","render","class","style","home","Component","APP_ID","CARDS_BACK_INDEXES","CARDS_LIST","label","CARDS_MAP","reduce","acc","item","getMetadata","widget","appId","Error","metadata","updateMetadata","nextMetadata","getCards","widgets","filter","type","side","location","origin","Controls","handleReveal","event","backCards","updates","onBeforeReveal","id","getCardURL","update","onReveal","handleClear","allCardIds","deleted","onBeforeClear","deleteById","log","onClear","wrapper","BACK_CARD_MAX_NUMBER","getBackCardUrl","min","floor","random","Card","state","loaded","handleLoad","setState","disabled","cards","delay","cardWrapper","animationDelay","card","data-loaded","data-value","backgroundImage","data-image-url","hiddenImg","onLoad","src","CardsList","ChosenCard","handleSwap","onBeforeSwap","error","chosenCardWidget","onError","onSwap","chosenCardWrapper","X_STEP","Y_STEP","bindBy","step","round","Placeholder","severity","children","data-severity","CardBacksPreloader","hiddenCard","RATIO","Cards","time","Date","now","count","loading","showList","ref","createRef","cardValue","initDraggableItemsContainer","current","draggableItemSelector","el","dataset","getDraggableItemPreview","offsetWidth","height","onDrop","y","hideList","author","capabilities","editable","createCard","setChosenCard","stateCallback","checkCardExistence","clearChosenCard","handleBeforeClear","init","myCard","currentUser","toString","getId","find","onWidgetsDeleted","data","controlsWrapper","Sidebar","updateTime","increment","timer","setInterval","componentWillUnmount","clearInterval","user","sidebar","authorizeOptions","response_type","redirect_uri","host","Authorizer","handleAuthorize","authorize","getToken","closeModal","innerHTML","svgWrapper","svg","AuthorizeSuccess","opener","miroAuthorized","App","handleRoute","currentUrl","localStorage","getItem","removeItem","onChange","widgetDOMHostElements","scripts","selector","inline","clientSpecified","hostNodes","currentScript","document","getElementsByTagName","parentNode","scriptTagAttrs","attributes","keys","forEach","nodeValue","getHabitatSelectorFromClient","querySelectorAll","queriedTag","hostElements","root","cleanRoot","defaultProps","elm","hostNode","_habitat","element","attrs","dataAttrName","propName","pop","letter","toUpperCase","propValue","scrp","propsObj","hasAttribute","getAttribute","JSON","parse","collectPropsFromElement","Widget","elements","clean","addEventListener","habitat","global","options","request","XMLHttpRequest","headers","open","method","onload","getAllResponseHeaders","toLowerCase","response","ok","status","statusText","responseURL","text","responseText","json","blob","Blob","clone","entries","has","onerror","withCredentials","credentials","setRequestHeader","send","body"],"mappings":"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","file":"ssr-bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"QfWi\");\n","module.exports = window.fetch || (window.fetch = require('unfetch').default || require('unfetch'));\n","/**\n * @this {Promise}\n */\nfunction finallyConstructor(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        // @ts-ignore\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nexport default finallyConstructor;\n","import promiseFinally from './finally';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction isArray(x) {\n  return Boolean(x && typeof x.length !== 'undefined');\n}\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.all accepts an array'));\n    }\n\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.race accepts an array'));\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      Promise.resolve(arr[i]).then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  // @ts-ignore\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      // @ts-ignore\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","module.exports = require(\"preact\");","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"home__MVGbg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"sidebar__U7KN2\"};","\nconst EMPTY = {};\n\nexport function assign(obj, props) {\n\t// eslint-disable-next-line guard-for-in\n\tfor (let i in props) {\n\t\tobj[i] = props[i];\n\t}\n\treturn obj;\n}\n\nexport function exec(url, route, opts) {\n\tlet reg = /(?:\\?([^#]*))?(#.*)?$/,\n\t\tc = url.match(reg),\n\t\tmatches = {},\n\t\tret;\n\tif (c && c[1]) {\n\t\tlet p = c[1].split('&');\n\t\tfor (let i=0; i<p.length; i++) {\n\t\t\tlet r = p[i].split('=');\n\t\t\tmatches[decodeURIComponent(r[0])] = decodeURIComponent(r.slice(1).join('='));\n\t\t}\n\t}\n\turl = segmentize(url.replace(reg, ''));\n\troute = segmentize(route || '');\n\tlet max = Math.max(url.length, route.length);\n\tfor (let i=0; i<max; i++) {\n\t\tif (route[i] && route[i].charAt(0)===':') {\n\t\t\tlet param = route[i].replace(/(^:|[+*?]+$)/g, ''),\n\t\t\t\tflags = (route[i].match(/[+*?]+$/) || EMPTY)[0] || '',\n\t\t\t\tplus = ~flags.indexOf('+'),\n\t\t\t\tstar = ~flags.indexOf('*'),\n\t\t\t\tval = url[i] || '';\n\t\t\tif (!val && !star && (flags.indexOf('?')<0 || plus)) {\n\t\t\t\tret = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmatches[param] = decodeURIComponent(val);\n\t\t\tif (plus || star) {\n\t\t\t\tmatches[param] = url.slice(i).map(decodeURIComponent).join('/');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\telse if (route[i]!==url[i]) {\n\t\t\tret = false;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (opts.default!==true && ret===false) return false;\n\treturn matches;\n}\n\nexport function pathRankSort(a, b) {\n\treturn (\n\t\t(a.rank < b.rank) ? 1 :\n\t\t\t(a.rank > b.rank) ? -1 :\n\t\t\t\t(a.index - b.index)\n\t);\n}\n\n// filter out VNodes without attributes (which are unrankeable), and add `index`/`rank` properties to be used in sorting.\nexport function prepareVNodeForRanking(vnode, index) {\n\tvnode.index = index;\n\tvnode.rank = rankChild(vnode);\n\treturn vnode.props;\n}\n\nexport function segmentize(url) {\n\treturn url.replace(/(^\\/+|\\/+$)/g, '').split('/');\n}\n\nexport function rankSegment(segment) {\n\treturn segment.charAt(0)==':' ? (1 + '*+?'.indexOf(segment.charAt(segment.length-1))) || 4 : 5;\n}\n\nexport function rank(path) {\n\treturn segmentize(path).map(rankSegment).join('');\n}\n\nfunction rankChild(vnode) {\n\treturn vnode.props.default ? 0 : rank(vnode.props.path);\n}\n","import { widgetDOMHostElements, preactRender } from \"./lib\";\n\nconst habitat = Widget => {\n  // Widget represents the Preact component we need to mount\n  let widget = Widget;\n  // preact root render helper\n  let root = null;\n\n  let render = (\n    {\n      selector = null,\n      inline = false,\n      clean = false,\n      clientSpecified = false,\n      defaultProps = {}\n    } = {}\n  ) => {\n    let elements = widgetDOMHostElements({\n      selector,\n      inline,\n      clientSpecified\n    });\n    let loaded = () => {\n      if (elements.length > 0) {\n        let elements = widgetDOMHostElements({\n          selector,\n          inline,\n          clientSpecified\n        });\n\n        return preactRender(widget, elements, root, clean, defaultProps);\n      }\n    };\n    loaded();\n    document.addEventListener(\"DOMContentLoaded\", loaded);\n    document.addEventListener(\"load\", loaded);\n  };\n\n  return { render };\n};\n\nexport default habitat;\n","import { h, Component } from 'preact';\r\nimport style from './style';\r\n\r\nimport icon24 from 'assets/icons/icon24.svg';\r\nimport icon48 from 'assets/icons/icon48.svg';\r\n\r\nconst startApp = () => {\r\n\tmiro.board.openLibrary('Poker Planning', 'sidebar');\r\n\tmiro.board.ui.openBottomPanel('bottomPanel', { width: 208 });\r\n};\r\n\r\nclass Home extends Component {\r\n\tcomponentDidMount() {\r\n\t\tmiro.onReady(() => {\r\n\t\t\tmiro.initialize({\r\n\t\t\t\textensionPoints: {\r\n\t\t\t\t\ttoolbar: {\r\n\t\t\t\t\t\ttitle: 'Poker Planning',\r\n\t\t\t\t\t\ttoolbarSvgIcon: icon24,\r\n\t\t\t\t\t\tlibrarySvgIcon: icon48,\r\n\t\t\t\t\t\tonClick: async () => {\r\n\t\t\t\t\t\t\tconst authorized = await miro.isAuthorized();\r\n\t\t\t\t\t\t\tif (authorized) {\r\n\t\t\t\t\t\t\t\tstartApp();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconst res = await miro.board.ui.openModal('authorize');\r\n\t\t\t\t\t\t\t\tif (res === 'success') {\r\n\t\t\t\t\t\t\t\t\tstartApp();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div class={style.home}>\r\n\t\t\t\t<h1>Home</h1>\r\n\t\t\t\t<p>This is the Home component.</p>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\nexport default Home;\r\n","export const APP_ID = '3074457347007443177';\r\n\r\n// eslint-disable-next-line no-magic-numbers\r\nexport const CARDS_BACK_INDEXES = [1, 2, 3, 4, 5, 6];\r\n\r\nexport const CARDS_LIST = [\r\n\t{\r\n\t\tlabel: '0',\r\n\t\tvalue: 0,\r\n\t},\r\n\t{\r\n\t\tlabel: '½',\r\n\t\tvalue: 0.5,\r\n\t},\r\n\t{\r\n\t\tlabel: '1',\r\n\t\tvalue: 1,\r\n\t},\r\n\t{\r\n\t\tlabel: '2',\r\n\t\tvalue: 2,\r\n\t},\r\n\t{\r\n\t\tlabel: '3',\r\n\t\tvalue: 3,\r\n\t},\r\n\t{\r\n\t\tlabel: '5',\r\n\t\tvalue: 5,\r\n\t},\r\n\t{\r\n\t\tlabel: '8',\r\n\t\tvalue: 8,\r\n\t},\r\n\t{\r\n\t\tlabel: '13',\r\n\t\tvalue: 13,\r\n\t},\r\n\t{\r\n\t\tlabel: '20',\r\n\t\tvalue: 20,\r\n\t},\r\n\t{\r\n\t\tlabel: '40',\r\n\t\tvalue: 40,\r\n\t},\r\n\t{\r\n\t\tlabel: '100',\r\n\t\tvalue: 100,\r\n\t},\r\n\t{\r\n\t\tlabel: '∞',\r\n\t\tvalue: 'infinity',\r\n\t},\r\n\t{\r\n\t\tlabel: '?',\r\n\t\tvalue: 'question',\r\n\t},\r\n\t{\r\n\t\tlabel: '☕',\r\n\t\tvalue: 'coffee',\r\n\t},\r\n];\r\n\r\nexport const CARDS_MAP = CARDS_LIST.reduce((acc, item) => {\r\n\tacc[item.value] = item;\r\n\treturn acc;\r\n}, {});\r\n","import { APP_ID } from 'appconstants';\r\n\r\nexport const getMetadata = (widget, appId = APP_ID) => {\r\n\tif (!appId) {\r\n\t\tthrow new Error('No appId specified');\r\n\t}\r\n\treturn widget.metadata[appId] || {};\r\n};\r\nexport const updateMetadata = (widget, nextMetadata, appId = APP_ID) => ({\r\n\t...widget.metadata,\r\n\t[appId]: {\r\n\t\t...widget.metadata[appId],\r\n\t\t...nextMetadata,\r\n\t},\r\n});\r\n\r\nexport const setMetadata = (widget, nextMetadata, appId = APP_ID) => ({\r\n\t...widget.metadata,\r\n\t[appId]: nextMetadata,\r\n});\r\n","import { getMetadata } from './metadata';\r\n\r\nexport default async function getCards() {\r\n\tconst widgets = await miro.board.widgets.get();\r\n\treturn widgets.filter(widget => getMetadata(widget).type === 'card');\r\n}\r\n","const { BASE_URL } = process.env;\r\n\r\nexport default (side, value = '') =>\r\n\t`${window.location.origin}/assets/cards/${side}${value}.svg`;\r\n","import { h, Component } from 'preact';\r\nimport style from './style';\r\nimport getCards from 'utils/getCards';\r\nimport { getMetadata, updateMetadata } from 'utils/metadata';\r\nimport getCardURL from 'utils/getCardURL';\r\n\r\nclass Controls extends Component {\r\n\thandleReveal = async event => {\r\n\t\tif (typeof this.props.onBeforeReveal === 'function') {\r\n\t\t\tthis.props.onBeforeReveal(event);\r\n\t\t}\r\n\t\tconst cards = await getCards();\r\n\r\n\t\tconst backCards = cards.filter(\r\n\t\t\twidget => getMetadata(widget).side === 'back'\r\n\t\t);\r\n\r\n\t\tconst updates = backCards.map(widget => {\r\n\t\t\tconst { id } = widget;\r\n\t\t\tconst { value } = getMetadata(widget);\r\n\t\t\treturn {\r\n\t\t\t\tid,\r\n\t\t\t\tmetadata: updateMetadata(widget, {\r\n\t\t\t\t\tside: 'face',\r\n\t\t\t\t}),\r\n\t\t\t\turl: getCardURL('face', value),\r\n\t\t\t};\r\n\t\t});\r\n\t\tawait miro.board.widgets.update(updates);\r\n\t\tif (typeof this.props.onReveal === 'function') {\r\n\t\t\tthis.props.onReveal();\r\n\t\t}\r\n\t};\r\n\r\n\thandleClear = async event => {\r\n\t\tif (typeof this.props.onBeforeClear === 'function') {\r\n\t\t\tthis.props.onBeforeClear(event);\r\n\t\t}\r\n\r\n\t\tconst cards = await getCards();\r\n\r\n\t\tconst allCardIds = cards\r\n\t\t\t.filter(widget => getMetadata(widget).type === 'card')\r\n\t\t\t.map(widget => widget.id);\r\n\r\n\t\tconst deleted = miro.board.widgets.deleteById(allCardIds);\r\n\r\n\t\t// eslint-disable-next-line no-console\r\n\t\tconsole.log('deleted', deleted.length, 'cards');\r\n\t\tif (typeof this.props.onClear === 'function') {\r\n\t\t\tthis.props.onClear();\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<nav class={style.wrapper}>\r\n\t\t\t\t<button\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tclass=\"miro-btn miro-btn--primary miro-btn--small\"\r\n\t\t\t\t\tonClick={this.handleReveal}\r\n\t\t\t\t>\r\n\t\t\t\t\tReveal all\r\n\t\t\t\t</button>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"miro-btn miro-btn--secondary miro-btn--small\"\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tonClick={this.handleClear}\r\n\t\t\t\t>\r\n\t\t\t\t\tClear all\r\n\t\t\t\t</button>\r\n\t\t\t</nav>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Controls;\r\n\r\n/*\r\nconst roundResults = backCards =>\r\n\tbackCards.reduce((acc, widget) => {\r\n\t\tconst { value } = getMetadata(widget);\r\n\t\tif (value in acc) {\r\n\t\t\tacc[value]++;\r\n\t\t} else {\r\n\t\t\tacc[value] = 1;\r\n\t\t}\r\n\r\n\t\treturn acc;\r\n\t}, {});\r\n\r\nconst resultShapePoint = backCards =>\r\n\tbackCards.reduce(\r\n\t\t(acc, widget, index, { length }) => {\r\n\t\t\tacc.x = acc.x + widget.x / length;\r\n\t\t\tacc.y = Math.max(acc.y, widget.y);\r\n\t\t\treturn acc;\r\n\t\t},\r\n\t\t{ x: 0, y: 0 }\r\n\t);\r\n\r\n\t*/\r\n","import getCardURL from './getCardURL';\r\nimport getRandomInteger from './getRandomInteger';\r\n\r\n// it's better to read from fs\r\nconst BACK_CARD_MAX_NUMBER = 6;\r\n\r\nexport default function getBackCardUrl() {\r\n\tconst value = getRandomInteger(1, BACK_CARD_MAX_NUMBER);\r\n\treturn getCardURL('back', value);\r\n}\r\n","export default function getRandomInteger(min, max) {\r\n\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n","import { h, Component } from 'preact';\r\nimport style from './style';\r\nimport getCardURL from 'utils/getCardURL';\r\n\r\nconst DELAY_ANIMATION = 50;\r\n\r\nclass Card extends Component {\r\n\tstate = {\r\n\t\tloaded: false,\r\n\t};\r\n\r\n\thandleLoad = () => {\r\n\t\tthis.setState({ loaded: true });\r\n\t};\r\n\r\n\trender({ value, disabled, label, index, cards = [] }) {\r\n\t\tconst url = getCardURL('face', value);\r\n\t\tconst delay = (cards.length - index) * DELAY_ANIMATION;\r\n\r\n\t\treturn (\r\n\t\t\t<div class={style.cardWrapper} style={{ animationDelay: `-${delay}ms` }}>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass={style.card}\r\n\t\t\t\t\ttitle={label}\r\n\t\t\t\t\tdisabled={Boolean(disabled)}\r\n\t\t\t\t\tdata-loaded={this.state.loaded ? 'yes' : 'no'}\r\n\t\t\t\t\tdata-value={value}\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackgroundImage: `url(${url})`,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tdata-image-url={url}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span>{label}</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<img class={style.hiddenImg} onLoad={this.handleLoad} src={url} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Card;\r\n","import { h, Fragment } from 'preact';\r\nimport Card from './Card';\r\nimport { CARDS_LIST } from 'appconstants';\r\n\r\nconst CardsList = ({ disabled }) => (\r\n\t<Fragment>\r\n\t\t{CARDS_LIST.map(({ label, value }, index, cards) => (\r\n\t\t\t<Card\r\n\t\t\t\tkey={value}\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\tlabel={label}\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tindex={index}\r\n\t\t\t\tcards={cards}\r\n\t\t\t/>\r\n\t\t))}\r\n\t</Fragment>\r\n);\r\nexport default CardsList;\r\n","import { h, Component } from 'preact';\r\nimport Card from './Card';\r\nimport style from './style';\r\nimport { CARDS_MAP } from 'appconstants';\r\nimport { getMetadata } from 'utils/metadata';\r\n\r\nexport default class ChosenCard extends Component {\r\n\thandleSwap = async event => {\r\n\t\tif (typeof this.props.onBeforeSwap === 'function') {\r\n\t\t\tthis.props.onBeforeSwap(event);\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tawait miro.board.widgets.deleteById([this.props.chosenCardWidget.id]);\r\n\t\t\tif (typeof this.props.onSwap === 'function') {\r\n\t\t\t\tthis.props.onSwap(event);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(this.props.chosenCardWidget.id);\r\n\t\t\tconsole.error(error);\r\n\t\t\tif (typeof this.props.onError === 'function') {\r\n\t\t\t\tthis.props.onError(error);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\trender({ chosenCardWidget }) {\r\n\t\tconst { value, label } = CARDS_MAP[getMetadata(chosenCardWidget).value];\r\n\t\treturn (\r\n\t\t\t<section class={style.chosenCardWrapper}>\r\n\t\t\t\t<h4 class=\"miro-h2\">Your card</h4>\r\n\r\n\t\t\t\t<Card value={value} label={label} disabled />\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={this.handleSwap}\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tclass=\"miro-btn miro-btn--secondary miro-btn--small\"\r\n\t\t\t\t>\r\n\t\t\t\t\tSwap\r\n\t\t\t\t</button>\r\n\t\t\t</section>\r\n\t\t);\r\n\t}\r\n}\r\n","import { APP_ID } from 'appconstants';\r\n\r\nconst X_STEP = 10;\r\nconst Y_STEP = 20;\r\n\r\nconst bindBy = (value, step) => Math.round(value / step) * step;\r\n\r\nexport default function createCard({ x, y, url, metadata }) {\r\n\treturn miro.board.widgets.create({\r\n\t\ttype: 'image',\r\n\t\turl,\r\n\t\tx: bindBy(x, X_STEP),\r\n\t\ty: bindBy(y, Y_STEP),\r\n\t\tcapabilities: {\r\n\t\t\teditable: false,\r\n\t\t},\r\n\t\tmetadata: {\r\n\t\t\t[APP_ID]: metadata,\r\n\t\t},\r\n\t});\r\n}\r\n","import { h } from 'preact';\r\nimport style from './style';\r\n\r\nconst Placeholder = ({ severity, title, children }) => (\r\n\t<section class={style.wrapper} data-severity={severity}>\r\n\t\t<h4 class=\"miro-h4\">{title}</h4>\r\n\t\t{children}\r\n\t</section>\r\n);\r\n\r\nexport default Placeholder;\r\n","import { h, Fragment } from 'preact';\r\nimport style from './style';\r\nimport getCardURL from 'utils/getCardURL';\r\nimport { CARDS_BACK_INDEXES } from 'appconstants';\r\n\r\nconst CardBacksPreloader = () => (\r\n\t<Fragment>\r\n\t\t{CARDS_BACK_INDEXES.map(index => (\r\n\t\t\t<img\r\n\t\t\t\tclass={style.hiddenCard}\r\n\t\t\t\tkey={index}\r\n\t\t\t\tsrc={getCardURL('back', index)}\r\n\t\t\t/>\r\n\t\t))}\r\n\t</Fragment>\r\n);\r\nexport default CardBacksPreloader;\r\n","import { h, Fragment, Component, createRef } from 'preact';\r\nimport style from './style';\r\nimport Controls from 'components/Controls';\r\nimport { getMetadata } from 'utils/metadata';\r\nimport getBackCardUrl from 'utils/getBackCardUrl';\r\nimport CardsList from './CardsList';\r\nimport ChosenCard from './ChosenCard';\r\nimport getCards from 'utils/getCards';\r\nimport createCard from 'utils/createCard';\r\nimport Placeholder from 'components/Placeholder';\r\nimport CardBacksPreloader from './CardBacksPreloader';\r\n\r\n// eslint-disable-next-line no-magic-numbers\r\nconst RATIO = 3 / 2;\r\n// const WIDTH = 100;\r\n\r\nexport default class Cards extends Component {\r\n\tstate = {\r\n\t\ttime: Date.now(),\r\n\t\tcount: 10,\r\n\t\tloading: true,\r\n\t\terror: null,\r\n\t\tchosenCardWidget: null,\r\n\t\tshowList: true,\r\n\t};\r\n\r\n\tref = createRef();\r\n\r\n\tonReady = () => {\r\n\t\tlet cardValue;\r\n\t\tlet url;\r\n\t\tmiro.board.ui.initDraggableItemsContainer(this.ref.current, {\r\n\t\t\tdraggableItemSelector: `.${style.card}`,\r\n\t\t\tonClick: el => {\r\n\t\t\t\tcardValue = el.dataset.value;\r\n\t\t\t},\r\n\t\t\tgetDraggableItemPreview: el => {\r\n\t\t\t\turl = getBackCardUrl();\r\n\t\t\t\tcardValue = el.dataset.value;\r\n\t\t\t\treturn {\r\n\t\t\t\t\twidth: el.offsetWidth,\r\n\t\t\t\t\theight: el.offsetWidth * RATIO,\r\n\t\t\t\t\turl,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tonDrop: async (x, y) => {\r\n\t\t\t\tthis.hideList();\r\n\t\t\t\tconst metadata = {\r\n\t\t\t\t\ttype: 'card',\r\n\t\t\t\t\tside: 'back',\r\n\t\t\t\t\tvalue: cardValue,\r\n\t\t\t\t\tauthor: this.state.id,\r\n\t\t\t\t};\r\n\t\t\t\tconst added = await createCard({\r\n\t\t\t\t\tx,\r\n\t\t\t\t\ty,\r\n\t\t\t\t\turl,\r\n\t\t\t\t\tmetadata,\r\n\t\t\t\t});\r\n\t\t\t\tconst [card] = added;\r\n\t\t\t\tthis.setChosenCard(card);\r\n\t\t\t},\r\n\t\t});\r\n\t};\r\n\r\n\tsetChosenCard = (widget, stateCallback) => {\r\n\t\tconst chosenCardWidget = widget;\r\n\t\tthis.setState({ chosenCardWidget, showList: false }, stateCallback);\r\n\t\tthis.checkCardExistence(widget.id);\r\n\t};\r\n\r\n\tcheckCardExistence = async id => {\r\n\t\ttry {\r\n\t\t\t// if it's updating -- it exists\r\n\t\t\tawait miro.board.widgets.update([{ id }]);\r\n\t\t\tsetTimeout(this.checkCardExistence, 1000, id);\r\n\t\t} catch (error) {\r\n\t\t\t// if it's an error -- it does not exist\r\n\t\t\tthis.clearChosenCard();\r\n\t\t}\r\n\t};\r\n\r\n\thideList = () => {\r\n\t\tthis.setState({ showList: false });\r\n\t};\r\n\r\n\tshowList = () => {\r\n\t\tthis.setState({ showList: true });\r\n\t};\r\n\r\n\tclearChosenCard = stateCallback => {\r\n\t\tthis.setState({ chosenCardWidget: null, showList: true }, stateCallback);\r\n\t};\r\n\r\n\thandleBeforeClear = async () => {\r\n\t\tthis.clearChosenCard();\r\n\t};\r\n\r\n\thandleReveal = async () => {};\r\n\r\n\tinit = async () => {\r\n\t\tif (!miro.currentUser) {\r\n\t\t\treturn this.setState({\r\n\t\t\t\terror: 'Seems like the app is running not as a part of Miro board',\r\n\t\t\t});\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconst [id, cards] = await Promise.all([\r\n\t\t\t\tmiro.currentUser.getId(),\r\n\t\t\t\tgetCards(),\r\n\t\t\t]);\r\n\t\t\tconst myCard = cards.find(widget => getMetadata(widget).author === id);\r\n\t\t\tif (myCard) {\r\n\t\t\t\tthis.setChosenCard(myCard);\r\n\t\t\t}\r\n\t\t\t// eslint-disable-next-line react/no-did-mount-set-state\r\n\t\t\tthis.setState({ id, loading: false }, () => {\r\n\t\t\t\tmiro.onReady(this.onReady);\r\n\t\t\t\t// const { WIDGETS_DELETED } = miro.enums.event;\r\n\t\t\t\t// console.log(WIDGETS_DELETED);\r\n\t\t\t\t// miro.addListener(WIDGETS_DELETED, this.onWidgetsDeleted);\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\t// eslint-disable-next-line react/no-did-mount-set-state\r\n\t\t\tthis.setState({\r\n\t\t\t\terror: error.toString(),\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tonWidgetsDeleted = event => {\r\n\t\tconst { data: widgets } = event;\r\n\t\tconst { chosenCardWidget } = this.state;\r\n\t\tif (!chosenCardWidget) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (widgets.find(widget => widget.id === chosenCardWidget.id)) {\r\n\t\t\tthis.clearChosenCard();\r\n\t\t}\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.init();\r\n\t}\r\n\r\n\trender({}, { chosenCardWidget, showList, loading, error }) {\r\n\t\tif (error) {\r\n\t\t\treturn (\r\n\t\t\t\t<Placeholder severity=\"error\" title=\"Oooops...\">\r\n\t\t\t\t\t<code>{error}</code>\r\n\t\t\t\t</Placeholder>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<div class={style.controlsWrapper}>\r\n\t\t\t\t\t<Controls\r\n\t\t\t\t\t\tonReveal={this.handleReveal}\r\n\t\t\t\t\t\tonBeforeClear={this.handleBeforeClear}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div ref={this.ref} class={style.wrapper}>\r\n\t\t\t\t\t{!chosenCardWidget && !loading && <CardsList disabled={!showList} />}\r\n\t\t\t\t</div>\r\n\t\t\t\t{Boolean(chosenCardWidget) && (\r\n\t\t\t\t\t<ChosenCard chosenCardWidget={chosenCardWidget} />\r\n\t\t\t\t)}\r\n\t\t\t\t<CardBacksPreloader />\r\n\t\t\t</Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n","import { h, Component } from 'preact';\r\nimport style from './style';\r\nimport CardPicker from './components/CardPicker';\r\n\r\nexport default class Sidebar extends Component {\r\n\tstate = {\r\n\t\ttime: Date.now(),\r\n\t\tcount: 10,\r\n\t};\r\n\r\n\t// update the current time\r\n\tupdateTime = () => {\r\n\t\tthis.setState({ time: Date.now() });\r\n\t};\r\n\r\n\tincrement = () => {\r\n\t\tthis.setState({ count: this.state.count + 1 });\r\n\t};\r\n\r\n\t// gets called when this route is navigated to\r\n\tcomponentDidMount() {\r\n\t\t// start a timer for the clock:\r\n\t\tthis.timer = setInterval(this.updateTime, 1000);\r\n\t}\r\n\r\n\t// gets called just before navigating away from the route\r\n\tcomponentWillUnmount() {\r\n\t\tclearInterval(this.timer);\r\n\t}\r\n\r\n\t// Note: `user` comes from the URL, courtesy of our router\r\n\trender({ user }, { time, count }) {\r\n\t\treturn (\r\n\t\t\t<div class={style.sidebar}>\r\n\t\t\t\t<CardPicker />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import { h, Component } from 'preact';\r\nimport style from './style';\r\nimport Controls from '../../components/Controls';\r\n\r\nexport default class Sidebar extends Component {\r\n\tstate = {\r\n\t\ttime: 1,\r\n\t};\r\n\r\n\t// Note: `user` comes from the URL, courtesy of our router\r\n\trender({ user }, { time, count }) {\r\n\t\treturn (\r\n\t\t\t<div class={style.sidebar}>\r\n\t\t\t\t<Controls />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","/* eslint-disable brace-style */\r\nimport { h, Component, createRef } from 'preact';\r\nimport icon48 from 'assets/icons/icon48.svg';\r\nimport style from './style';\r\n\r\nconst authorizeOptions = {\r\n\tresponse_type: 'token',\r\n\tredirect_uri: 'https://' + window.location.host + '/authorize-success',\r\n};\r\n\r\nclass Authorizer extends Component {\r\n\tref = createRef();\r\n\r\n\thandleAuthorize = async () => {\r\n\t\tawait miro.authorize(authorizeOptions);\r\n\t\tconst token = await miro.getToken();\r\n\t\tif (token) {\r\n\t\t\tmiro.board.ui.closeModal('success');\r\n\t\t} else {\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tconsole.log('Something went wrong');\r\n\t\t}\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.ref.current) {\r\n\t\t\tthis.ref.current.innerHTML = icon48;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<section class={style.wrapper}>\r\n\t\t\t\t<h2 class=\"miro-h2\">Poker planning widget</h2>\r\n\t\t\t\t<p class=\"miro-p\">\r\n\t\t\t\t\tTo use the widget, please authorize it in your account\r\n\t\t\t\t</p>\r\n\t\t\t\t<div class={style.svgWrapper}>\r\n\t\t\t\t\t<svg class={style.svg} ref={this.ref} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<button\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tclass=\"miro-btn miro-btn--primary miro-btn--medium\"\r\n\t\t\t\t\tonClick={this.handleAuthorize}\r\n\t\t\t\t>\r\n\t\t\t\t\tAuthorize app\r\n\t\t\t\t</button>\r\n\t\t\t</section>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Authorizer;\r\n","import { h, Component } from 'preact';\r\n\r\nclass AuthorizeSuccess extends Component {\r\n\tcomponentDidMount() {\r\n\t\tif (window.opener) {\r\n\t\t\twindow.opener.miroAuthorized();\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn <section>Authorized!</section>;\r\n\t}\r\n}\r\n\r\nexport default AuthorizeSuccess;\r\n","import { h, Component } from 'preact';\r\nimport { Router, route } from 'preact-router';\r\n\r\n// Code-splitting is automated for routes\r\nimport Home from 'routes/home';\r\nimport Sidebar from 'routes/sidebar';\r\nimport BottomPanel from 'routes/bottomPanel';\r\nimport Authorizer from 'routes/authorize';\r\nimport AuthorizeSuccess from 'routes/authorize-success';\r\n\r\nexport default class App extends Component {\r\n\thandleRoute = e => {\r\n\t\tthis.currentUrl = e.url;\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst path = localStorage.getItem('path');\r\n\t\tif (path) {\r\n\t\t\tlocalStorage.removeItem('path');\r\n\t\t\troute(path, true);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Router onChange={this.handleRoute}>\r\n\t\t\t\t<Home path=\"/\" />\r\n\t\t\t\t<Sidebar path=\"/sidebar/\" user=\"me\" />\r\n\t\t\t\t<BottomPanel path=\"/bottomPanel/\" user=\"me\" />\r\n\t\t\t\t<Authorizer path=\"/authorize/\" />\r\n\t\t\t\t<AuthorizeSuccess path=\"/authorize-success/\" />\r\n\t\t\t</Router>\r\n\t\t);\r\n\t}\r\n}\r\n","import { h, render } from \"preact\";\n/**\n * Removes `-` fron a string and capetalize the letter after\n * example: data-props-hello-world =>  dataPropsHelloWorld\n * Used for props passed from host DOM element\n * @param  {String} str string\n * @return {String} Capetalized string\n */\nconst camelcasize = str => {\n  return str.replace(/-([a-z])/gi, (all, letter) => {\n    return letter.toUpperCase();\n  });\n};\n\n/**\n * [getExecutedScript internal widget to provide the currently executed script]\n * @param  {document} document [Browser document object]\n * @return {HTMLElement}     [script Element]\n */\nconst getExecutedScript = () => {\n  return (\n    document.currentScript ||\n    (() => {\n      let scripts = document.getElementsByTagName(\"script\");\n      return scripts[scripts.length - 1];\n    })()\n  );\n};\n\n/**\n * Get the props from a host element's data attributes\n * @param  {Element} tag The host element\n * @return {Object}  props object to be passed to the component\n */\nconst collectPropsFromElement = (element, defaultProps = {}) => {\n  let attrs = element.attributes;\n\n  let props = Object.assign({}, defaultProps);\n\n  // collect from element\n  Object.keys(attrs).forEach(key => {\n    if (attrs.hasOwnProperty(key)) {\n      let dataAttrName = attrs[key].name;\n      if (!dataAttrName || typeof dataAttrName !== \"string\") {\n        return false;\n      }\n      let propName = dataAttrName.split(/(data-props?-)/).pop() || '';\n      propName = camelcasize(propName);\n      if (dataAttrName !== propName) {\n        let propValue = attrs[key].nodeValue;\n        props[propName] = propValue;\n      }\n    }\n  });\n\n  // check for child script text/props or application/json\n  [].forEach.call(element.getElementsByTagName('script'), scrp => {\n    let propsObj = {}\n    if(scrp.hasAttribute('type')) {\n      if (\n        scrp.getAttribute(\"type\") !== \"text/props\" &&\n        scrp.getAttribute(\"type\") !== \"application/json\"\n      )\n        return;\n      try {\n        propsObj = JSON.parse(scrp.innerHTML);\n      } catch(e) {\n        throw new Error(e)\n      }\n      Object.assign(props, propsObj)\n    }\n  });  \n\n  return props;\n};\n\nconst getHabitatSelectorFromClient = (currentScript) => {\n  let scriptTagAttrs = currentScript.attributes;\n  let selector = null;\n  // check for another props attached to the tag\n  Object.keys(scriptTagAttrs).forEach(key => {\n    if (scriptTagAttrs.hasOwnProperty(key)) {\n      const dataAttrName = scriptTagAttrs[key].name;\n      if (dataAttrName === 'data-mount-in') {\n        selector = scriptTagAttrs[key].nodeValue;\n      }\n    }\n  });\n  return selector\n}\n\n/**\n * Return array of 0 or more elements that will host our widget\n * @param  {id} attrId the data widget id attribute the host should have\n * @param  {document} scope  Docuemnt object or DOM Element as a scope\n * @return {Array}        Array of matching habitats\n */\nconst widgetDOMHostElements = (\n  { selector, inline, clientSpecified}\n) => {\n  let hostNodes = [];\n  let currentScript = getExecutedScript();\n\n  if (inline === true) {\n    let parentNode = currentScript.parentNode;\n    hostNodes.push(parentNode);\n  }\n  if (clientSpecified === true && !selector) {\n    // user did not specify where to mount - get it from script tag attributes\n    selector = getHabitatSelectorFromClient(currentScript);\n  }\n  if (selector) {\n    [].forEach.call(document.querySelectorAll(selector), queriedTag => {\n      hostNodes.push(queriedTag);\n    });\n  }\n  return hostNodes;\n};\n\n/**\n * preact render function that will be queued if the DOM is not ready\n * and executed immeidatly if DOM is ready\n */\nconst preactRender = (widget, hostElements, root, cleanRoot, defaultProps) => {\n  hostElements.forEach(elm => {\n    let hostNode = elm;\n    if (hostNode._habitat) {\n      return; \n    }\n    hostNode._habitat = true;\n    let props = collectPropsFromElement(elm, defaultProps) || defaultProps;\n    if(cleanRoot) {\n      hostNode.innerHTML = \"\";\n    }\n    return render(h(widget, props), hostNode, root);\n  });\n};\n\nexport {\n  collectPropsFromElement,\n  widgetDOMHostElements,\n  getExecutedScript,\n  camelcasize,\n  preactRender,\n  getHabitatSelectorFromClient\n};\n","import './style';\r\nimport App from './components/app';\r\n// eslint-disable-next-line no-unused-vars\r\nimport { h } from 'preact';\r\nimport habitat from 'preact-habitat';\r\n\r\n// eslint-disable-next-line no-unused-vars\r\nlet poly = require('preact-cli/lib/lib/webpack/polyfills');\r\n\r\nlet _habitat = habitat(App);\r\n\r\n_habitat.render({\r\n\tselector: '[data-widget-host=\"habitat\"]',\r\n\tclean: true,\r\n});\r\n","module.exports = \"<rect fill=\\\"#fff9df\\\" x=\\\"22\\\" y=\\\"2\\\" width=\\\"24\\\" height=\\\"36\\\" rx=\\\"2.7619\\\" ry=\\\"2.7619\\\"></rect><path fill=\\\"#3e52d8\\\" d=\\\"M46.01,0H21.99A1.99,1.99,0,0,0,20,1.99V8h3V3H45V37H28v3H46.01A1.99,1.99,0,0,0,48,38.01h0V1.99A1.99,1.99,0,0,0,46.01,0Z\\\"></path><path fill=\\\"none\\\" d=\\\"M26.01,8H1.99A1.99,1.99,0,0,0,0,9.99V46.01A1.99,1.99,0,0,0,1.99,48H26.01A1.99,1.99,0,0,0,28,46.01h0V9.99A1.99,1.99,0,0,0,26.01,8Z\\\"></path><path fill=\\\"#3e52d8\\\" d=\\\"M26.01,8H1.99A1.99,1.99,0,0,0,0,9.99V46.01A1.99,1.99,0,0,0,1.99,48H26.01A1.99,1.99,0,0,0,28,46.01h0V9.99A1.99,1.99,0,0,0,26.01,8Z\\\"></path><path fill=\\\"#050039\\\" d=\\\"M.58,24.0005c-.1944-.0013-.3864.0074-.58.0107V46.01A1.99,1.99,0,0,0,1.99,48H24.6346A24.2268,24.2268,0,0,0,.58,24.0005Z\\\"></path><path fill=\\\"#ffd02f\\\" d=\\\"M.2225,33.33c-.0752,0-.1477.01-.2225.0112V46.01A1.99,1.99,0,0,0,1.99,48h13.3A15.0792,15.0792,0,0,0,.2225,33.33Z\\\"></path><path fill=\\\"#ff6474\\\" d=\\\"M26.01,8H12.4214A15.7832,15.7832,0,0,0,28,23.579V9.99A1.99,1.99,0,0,0,26.01,8Z\\\"></path>\"","if (!global.Promise) global.Promise = require('promise-polyfill').default;\nif (!global.fetch) global.fetch = require('isomorphic-unfetch');\n","export default function(url, options) {\n\toptions = options || {};\n\treturn new Promise( (resolve, reject) => {\n\t\tconst request = new XMLHttpRequest();\n\t\tconst keys = [];\n\t\tconst all = [];\n\t\tconst headers = {};\n\n\t\tconst response = () => ({\n\t\t\tok: (request.status/100|0) == 2,\t\t// 200-299\n\t\t\tstatusText: request.statusText,\n\t\t\tstatus: request.status,\n\t\t\turl: request.responseURL,\n\t\t\ttext: () => Promise.resolve(request.responseText),\n\t\t\tjson: () => Promise.resolve(JSON.parse(request.responseText)),\n\t\t\tblob: () => Promise.resolve(new Blob([request.response])),\n\t\t\tclone: response,\n\t\t\theaders: {\n\t\t\t\tkeys: () => keys,\n\t\t\t\tentries: () => all,\n\t\t\t\tget: n => headers[n.toLowerCase()],\n\t\t\t\thas: n => n.toLowerCase() in headers\n\t\t\t}\n\t\t});\n\n\t\trequest.open(options.method || 'get', url, true);\n\n\t\trequest.onload = () => {\n\t\t\trequest.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm, (m, key, value) => {\n\t\t\t\tkeys.push(key = key.toLowerCase());\n\t\t\t\tall.push([key, value]);\n\t\t\t\theaders[key] = headers[key] ? `${headers[key]},${value}` : value;\n\t\t\t});\n\t\t\tresolve(response());\n\t\t};\n\n\t\trequest.onerror = reject;\n\n\t\trequest.withCredentials = options.credentials=='include';\n\n\t\tfor (const i in options.headers) {\n\t\t\trequest.setRequestHeader(i, options.headers[i]);\n\t\t}\n\n\t\trequest.send(options.body || null);\n\t});\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"wrapper__2JnRV\",\"svg\":\"svg__2hhJb\",\"svgWrapper\":\"svgWrapper__2EBVO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"wrapper__18AHL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cardWrapper\":\"cardWrapper__1MWxn\",\"appear\":\"appear__3Vz41\",\"card\":\"card__3IJo5\",\"floating\":\"floating__34mDX\",\"hiddenImg\":\"hiddenImg__1BjkP\",\"chosenCardWrapper\":\"chosenCardWrapper__3hGqt\",\"wrapper\":\"wrapper__3uuSv\",\"controlsWrapper\":\"controlsWrapper__1xvok\",\"hiddenCard\":\"hiddenCard__33y6H\"};","module.exports = \"<svg id=\\\"Layer_1\\\" data-name=\\\"Layer 1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\"><path fill=\\\"currentColor\\\" d=\\\"M23.0049,0h-12.01A.9952.9952,0,0,0,10,.9951V4H.9951A.9952.9952,0,0,0,0,4.9951v18.01A.9952.9952,0,0,0,.9951,24h12.01A.9952.9952,0,0,0,14,23.0049V20h9.0049A.9952.9952,0,0,0,24,19.0049V.9951A.9952.9952,0,0,0,23.0049,0ZM12,22H2V6H12Zm10-4H14V4.9951A.9952.9952,0,0,0,13.0049,4H12V2H22ZM4,9H4A1,1,0,0,1,3,8H3A1,1,0,0,1,4,7H4A1,1,0,0,1,5,8H5A1,1,0,0,1,4,9Zm3,7H7a2,2,0,0,1-2-2H5a2,2,0,0,1,2-2H7a2,2,0,0,1,2,2H9A2,2,0,0,1,7,16Zm3,5h0a1,1,0,0,1-1-1H9a1,1,0,0,1,1-1h0a1,1,0,0,1,1,1h0A1,1,0,0,1,10,21Z\\\"></path></svg>\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"wrapper__jTLi2\"};"],"sourceRoot":""}